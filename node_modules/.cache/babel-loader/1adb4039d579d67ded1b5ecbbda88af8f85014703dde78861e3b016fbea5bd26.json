{"ast":null,"code":"/*\r\nAPI key: PYUXRI5IDPDXBAJKYY\r\nClient secret: VNT5L5T47B667YWGWREPP4BLN5UWHS47HE7IHCBA2J2FTOUKDM\r\nPrivate token: NEMSZJPVJRTZ2W7LCY2F\r\nPublic token: R5JZMBXB5WSTIZ64PXGC\r\n\r\norganization id: 2404201774443;\r\n\r\n!!! IMPORTANT REQUEST URLS !!!\r\nGET 'https://www.eventbriteapi.com/v3/users/me/organizations/' gets organization id\r\nGET `https://www.eventbriteapi.com/v3/users/me/?token=${token}` verifies subscription exists\r\nGET `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all` lists all events (all is all events current_future is all future events)\r\nGET `https://www.eventbriteapi.com/v3/events/{event_id}/?expand=ticket_availability` ticket availability\r\n\r\n*/\nimport axios from \"axios\";\nimport app from './firebaseConfig';\nimport { getDatabase, ref, set, push } from 'firebase/database';\nasync function getEvents() {\n  const id = \"2404201774443\";\n  const url = `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all`;\n  const token = \"NEMSZJPVJRTZ2W7LCY2F\";\n  // const url = `https://www.eventbriteapi.com/v3/users/me/?token=${token}`;\n\n  try {\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    let res = response.data;\n    console.log(res);\n    let events = res.events;\n    let eventsDis = events.map(m => {\n      const saveData = async () => {\n        const db = getDatabase(app);\n        const newEvent = push(ref(db, \"events/events2\"));\n        set(newEvent, {\n          name: m.name.text,\n          url: m.url,\n          capacity: m.capacity\n        }).then(() => {\n          alert(\"Data Save Successfully\");\n        }).catch(error => {\n          alert(\"error:\", error.message);\n        });\n      };\n      saveData();\n      return `<li><ul><li>Name:${m.name.text}</li><li>url: ${m.url}</li><li>Capacity: ${m.capacity}</li><li><a href=\"/checkout\">Buy Tickets</a></li></li></ul></li>`;\n    });\n    document.querySelector(\"#events\").innerHTML = `<ul>${eventsDis}</ul>`;\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n  }\n}\nexport default getEvents;","map":{"version":3,"names":["axios","app","getDatabase","ref","set","push","getEvents","id","url","token","response","get","headers","Authorization","res","data","console","log","events","eventsDis","map","m","saveData","db","newEvent","name","text","capacity","then","alert","catch","error","message","document","querySelector","innerHTML"],"sources":["C:/Users/holla/circus-website2/src/API.js"],"sourcesContent":["/*\r\nAPI key: PYUXRI5IDPDXBAJKYY\r\nClient secret: VNT5L5T47B667YWGWREPP4BLN5UWHS47HE7IHCBA2J2FTOUKDM\r\nPrivate token: NEMSZJPVJRTZ2W7LCY2F\r\nPublic token: R5JZMBXB5WSTIZ64PXGC\r\n\r\norganization id: 2404201774443;\r\n\r\n!!! IMPORTANT REQUEST URLS !!!\r\nGET 'https://www.eventbriteapi.com/v3/users/me/organizations/' gets organization id\r\nGET `https://www.eventbriteapi.com/v3/users/me/?token=${token}` verifies subscription exists\r\nGET `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all` lists all events (all is all events current_future is all future events)\r\nGET `https://www.eventbriteapi.com/v3/events/{event_id}/?expand=ticket_availability` ticket availability\r\n\r\n*/\r\nimport axios from \"axios\";\r\nimport app from './firebaseConfig';\r\nimport { getDatabase, ref, set, push } from 'firebase/database';\r\n\r\n\r\nasync function getEvents() {\r\n  const id = \"2404201774443\";\r\n  const url = `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all`;\r\n  const token = \"NEMSZJPVJRTZ2W7LCY2F\";\r\n  // const url = `https://www.eventbriteapi.com/v3/users/me/?token=${token}`;\r\n\r\n  try {\r\n    const response = await axios.get(url, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    let res = response.data;\r\n\r\n    \r\n\r\n    console.log(res);\r\n    let events = res.events;\r\n    \r\n    let eventsDis = events.map(\r\n      (m) =>{\r\n        const saveData = async () => {\r\n          const db = getDatabase(app);\r\n          const newEvent = push(ref(db, \"events/events2\"));\r\n          set(newEvent, {\r\n            name: m.name.text,\r\n            url: m.url,\r\n            capacity: m.capacity,\r\n\r\n          }).then( () => { \r\n            alert(\"Data Save Successfully\") \r\n          }).catch((error) => {\r\n            alert(\"error:\", error.message);\r\n          })\r\n        }\r\n        saveData();\r\n        return `<li><ul><li>Name:${m.name.text}</li><li>url: ${m.url}</li><li>Capacity: ${m.capacity}</li><li><a href=\"/checkout\">Buy Tickets</a></li></li></ul></li>`;\r\n      }\r\n\r\n    );\r\n   document.querySelector(\"#events\").innerHTML = `<ul>${eventsDis}</ul>`;\r\n  } catch (error) {\r\n    console.error(\"Error fetching data:\", error);\r\n  }\r\n}\r\nexport default getEvents;\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n \r\n\r\n\r\n  \r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,kBAAkB;AAClC,SAASC,WAAW,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,QAAQ,mBAAmB;AAG/D,eAAeC,SAASA,CAAA,EAAG;EACzB,MAAMC,EAAE,GAAG,eAAe;EAC1B,MAAMC,GAAG,GAAG,kDAAkDD,EAAE,0BAA0B;EAC1F,MAAME,KAAK,GAAG,sBAAsB;EACpC;;EAEA,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAG,CAACH,GAAG,EAAE;MACpCI,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,KAAK;MAChC;IACF,CAAC,CAAC;IACF,IAAIK,GAAG,GAAGJ,QAAQ,CAACK,IAAI;IAIvBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAChB,IAAII,MAAM,GAAGJ,GAAG,CAACI,MAAM;IAEvB,IAAIC,SAAS,GAAGD,MAAM,CAACE,GAAG,CACvBC,CAAC,IAAI;MACJ,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;QAC3B,MAAMC,EAAE,GAAGrB,WAAW,CAACD,GAAG,CAAC;QAC3B,MAAMuB,QAAQ,GAAGnB,IAAI,CAACF,GAAG,CAACoB,EAAE,EAAE,gBAAgB,CAAC,CAAC;QAChDnB,GAAG,CAACoB,QAAQ,EAAE;UACZC,IAAI,EAAEJ,CAAC,CAACI,IAAI,CAACC,IAAI;UACjBlB,GAAG,EAAEa,CAAC,CAACb,GAAG;UACVmB,QAAQ,EAAEN,CAAC,CAACM;QAEd,CAAC,CAAC,CAACC,IAAI,CAAE,MAAM;UACbC,KAAK,CAAC,wBAAwB,CAAC;QACjC,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;UAClBF,KAAK,CAAC,QAAQ,EAAEE,KAAK,CAACC,OAAO,CAAC;QAChC,CAAC,CAAC;MACJ,CAAC;MACDV,QAAQ,CAAC,CAAC;MACV,OAAO,oBAAoBD,CAAC,CAACI,IAAI,CAACC,IAAI,iBAAiBL,CAAC,CAACb,GAAG,sBAAsBa,CAAC,CAACM,QAAQ,kEAAkE;IAChK,CAEF,CAAC;IACFM,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC,CAACC,SAAS,GAAG,OAAOhB,SAAS,OAAO;EACtE,CAAC,CAAC,OAAOY,KAAK,EAAE;IACdf,OAAO,CAACe,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C;AACF;AACA,eAAezB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}