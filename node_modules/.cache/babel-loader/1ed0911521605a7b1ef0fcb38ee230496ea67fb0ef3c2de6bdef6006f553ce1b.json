{"ast":null,"code":"/*\r\nAPI key: PYUXRI5IDPDXBAJKYY\r\nClient secret: VNT5L5T47B667YWGWREPP4BLN5UWHS47HE7IHCBA2J2FTOUKDM\r\nPrivate token: NEMSZJPVJRTZ2W7LCY2F\r\nPublic token: R5JZMBXB5WSTIZ64PXGC\r\n\r\norganization id: 2404201774443;\r\n\r\n!!! IMPORTANT REQUEST URLS !!!\r\nGET 'https://www.eventbriteapi.com/v3/users/me/organizations/' gets organization id\r\nGET `https://www.eventbriteapi.com/v3/users/me/?token=${token}` verifies subscription exists\r\nGET `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all` lists all events (all is all events current_future is all future events)\r\nGET `https://www.eventbriteapi.com/v3/events/{event_id}/?expand=ticket_availability` ticket availability\r\n\r\n\r\n\r\n*/\nimport axios from \"axios\";\n// import { insertEvents } from \"./mongo\";\n\nasync function getEvents() {\n  const id = \"2404201774443\";\n  const url = `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all`;\n  const token = \"NEMSZJPVJRTZ2W7LCY2F\";\n  // const url = `https://www.eventbriteapi.com/v3/users/me/?token=${token}`;\n\n  try {\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    let res = response.data;\n    console.log(res);\n    let events = res.events;\n    await insertEvents(events);\n    // let eventsDis = events.map(\n    //   (m) =>\n    //     `<li><ul><li>Name:${m.name.text}</li><li>url: ${m.url}</li><li>Capacity: ${m.capacity}</li><li><a href=\"/checkout\">Buy Tickets</a></li></li></ul></li>`\n    // );\n    // document.querySelector(\"#events\").innerHTML = `<ul>${eventsDis}</ul>`;\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n  }\n}\nexport default getEvents;\nconst path = require(\"path\");\nrequire(\"dotenv\").config({\n  path: path.resolve(__dirname, 'credentialsDontPost/.env')\n});\nconst uri = process.env.MONGO_CONNECTION_STRING;\n\n/* Our database and collection */\nconst databaseAndCollection = {\n  db: process.env.MONGO_DB_NAME,\n  collection: process.env.MONGO_COLLECTION\n};\n\n/****** DO NOT MODIFY FROM THIS POINT ONE ******/\nconst {\n  MongoClient,\n  ServerApiVersion\n} = require('mongodb');\nasync function insertEvents(events) {\n  const client = new MongoClient(uri, {\n    serverApi: ServerApiVersion.v1\n  });\n  try {\n    await client.connect();\n    await client.db(databaseAndCollection.db).collection(databaseAndCollection.collection).insertMany(events);\n  } catch (e) {\n    console.error(e);\n  } finally {\n    await client.close();\n  }\n}","map":{"version":3,"names":["axios","getEvents","id","url","token","response","get","headers","Authorization","res","data","console","log","events","insertEvents","error","path","require","config","resolve","__dirname","uri","process","env","MONGO_CONNECTION_STRING","databaseAndCollection","db","MONGO_DB_NAME","collection","MONGO_COLLECTION","MongoClient","ServerApiVersion","client","serverApi","v1","connect","insertMany","e","close"],"sources":["C:/Users/holla/circus-website2/src/API.js"],"sourcesContent":["/*\r\nAPI key: PYUXRI5IDPDXBAJKYY\r\nClient secret: VNT5L5T47B667YWGWREPP4BLN5UWHS47HE7IHCBA2J2FTOUKDM\r\nPrivate token: NEMSZJPVJRTZ2W7LCY2F\r\nPublic token: R5JZMBXB5WSTIZ64PXGC\r\n\r\norganization id: 2404201774443;\r\n\r\n!!! IMPORTANT REQUEST URLS !!!\r\nGET 'https://www.eventbriteapi.com/v3/users/me/organizations/' gets organization id\r\nGET `https://www.eventbriteapi.com/v3/users/me/?token=${token}` verifies subscription exists\r\nGET `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all` lists all events (all is all events current_future is all future events)\r\nGET `https://www.eventbriteapi.com/v3/events/{event_id}/?expand=ticket_availability` ticket availability\r\n\r\n\r\n\r\n*/\r\nimport axios from \"axios\";\r\n// import { insertEvents } from \"./mongo\";\r\n\r\n\r\nasync function getEvents() {\r\n  const id = \"2404201774443\";\r\n  const url = `https://www.eventbriteapi.com/v3/organizations/${id}/events/?time_filter=all`;\r\n  const token = \"NEMSZJPVJRTZ2W7LCY2F\";\r\n  // const url = `https://www.eventbriteapi.com/v3/users/me/?token=${token}`;\r\n\r\n  try {\r\n    const response = await axios.get(url, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    let res = response.data;\r\n\r\n    console.log(res);\r\n    let events = res.events;\r\n    await insertEvents(events);\r\n    // let eventsDis = events.map(\r\n    //   (m) =>\r\n    //     `<li><ul><li>Name:${m.name.text}</li><li>url: ${m.url}</li><li>Capacity: ${m.capacity}</li><li><a href=\"/checkout\">Buy Tickets</a></li></li></ul></li>`\r\n    // );\r\n   // document.querySelector(\"#events\").innerHTML = `<ul>${eventsDis}</ul>`;\r\n  } catch (error) {\r\n    console.error(\"Error fetching data:\", error);\r\n  }\r\n}\r\nexport default getEvents;\r\n\r\n\r\nconst path = require(\"path\");\r\nrequire(\"dotenv\").config({ path: path.resolve(__dirname, 'credentialsDontPost/.env') }) \r\n\r\nconst uri = process.env.MONGO_CONNECTION_STRING;\r\n\r\n /* Our database and collection */\r\n const databaseAndCollection = {db: process.env.MONGO_DB_NAME, collection:process.env.MONGO_COLLECTION};\r\n\r\n/****** DO NOT MODIFY FROM THIS POINT ONE ******/\r\nconst { MongoClient, ServerApiVersion } = require('mongodb');\r\n\r\n\r\nasync function insertEvents(events) {\r\n  const client = new MongoClient(uri, { serverApi: ServerApiVersion.v1 });\r\n\r\n  try {\r\n    await client.connect();\r\n    await client.db(databaseAndCollection.db).collection(databaseAndCollection.collection).insertMany(events);\r\n  } catch (e) {\r\n    console.error(e);\r\n  } finally {\r\n    await client.close();\r\n  }\r\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB;;AAGA,eAAeC,SAASA,CAAA,EAAG;EACzB,MAAMC,EAAE,GAAG,eAAe;EAC1B,MAAMC,GAAG,GAAG,kDAAkDD,EAAE,0BAA0B;EAC1F,MAAME,KAAK,GAAG,sBAAsB;EACpC;;EAEA,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,GAAG,CAACH,GAAG,EAAE;MACpCI,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,KAAK;MAChC;IACF,CAAC,CAAC;IACF,IAAIK,GAAG,GAAGJ,QAAQ,CAACK,IAAI;IAEvBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAChB,IAAII,MAAM,GAAGJ,GAAG,CAACI,MAAM;IACvB,MAAMC,YAAY,CAACD,MAAM,CAAC;IAC1B;IACA;IACA;IACA;IACD;EACD,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdJ,OAAO,CAACI,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C;AACF;AACA,eAAed,SAAS;AAGxB,MAAMe,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5BA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC;EAAEF,IAAI,EAAEA,IAAI,CAACG,OAAO,CAACC,SAAS,EAAE,0BAA0B;AAAE,CAAC,CAAC;AAEvF,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB;;AAE9C;AACA,MAAMC,qBAAqB,GAAG;EAACC,EAAE,EAAEJ,OAAO,CAACC,GAAG,CAACI,aAAa;EAAEC,UAAU,EAACN,OAAO,CAACC,GAAG,CAACM;AAAgB,CAAC;;AAEvG;AACA,MAAM;EAAEC,WAAW;EAAEC;AAAiB,CAAC,GAAGd,OAAO,CAAC,SAAS,CAAC;AAG5D,eAAeH,YAAYA,CAACD,MAAM,EAAE;EAClC,MAAMmB,MAAM,GAAG,IAAIF,WAAW,CAACT,GAAG,EAAE;IAAEY,SAAS,EAAEF,gBAAgB,CAACG;EAAG,CAAC,CAAC;EAEvE,IAAI;IACF,MAAMF,MAAM,CAACG,OAAO,CAAC,CAAC;IACtB,MAAMH,MAAM,CAACN,EAAE,CAACD,qBAAqB,CAACC,EAAE,CAAC,CAACE,UAAU,CAACH,qBAAqB,CAACG,UAAU,CAAC,CAACQ,UAAU,CAACvB,MAAM,CAAC;EAC3G,CAAC,CAAC,OAAOwB,CAAC,EAAE;IACV1B,OAAO,CAACI,KAAK,CAACsB,CAAC,CAAC;EAClB,CAAC,SAAS;IACR,MAAML,MAAM,CAACM,KAAK,CAAC,CAAC;EACtB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}